
<!DOCTYPE html>
<html lang="en">
    <!--<head th:replace="common/header :: common-header" />-->
    <head th:replace="common/header :: common-header" />

    <!--     <body class="sidebar-mini wysihtml5-supported skin-blue-light">-->
    <body class="hold-transition login-page">

        <!-- /.login-logo -->
        <div class="register-box">
            <div class="register-logo">
                <a th:href="@{/}">
                    <b>مدرسة محمود الشناوي بالحميدية
                    </b>
                </a>
            </div>

            <div class="register-box-body">
                <p class="login-box-msg">تسجيل بيانات مستخدم جديد</p>
                <form th:action="@{/newUser}" method="post">
                    <div class="form-group has-feedback">
                        <input type="text" 
                               class="form-control text-right" 
                               id="firstName"
                               name="firstName"
                               th:value="${user.firstName}"
                               required
                               oninvalid="this.setCustomValidity('من فضلك ادخل الاسم الأول للمستخدم')"
                               oninput="setCustomValidity('')"
                               placeholder="الاسم الاول">
                        <span class="glyphicon glyphicon-user form-control-feedback"></span>
                        <div class="bg-danger text-right" th:if="${firstNameError}">
                            <span>خطأ في ادخال الاسم الاول للمستخدم</span>
                        </div>
                    </div>

                    <div class="form-group has-feedback">
                        <input type="text" 
                               class="form-control text-right" 
                               id="lastName"
                               name="lastName"
                               th:value="${user.lastName}"
                               required
                               oninvalid="this.setCustomValidity('من فضلك ادخل الاسم الاخير للمستخدم')"
                               oninput="setCustomValidity('')"
                               placeholder="الاسم الأخير">
                        <span class="glyphicon glyphicon-user form-control-feedback"></span>
                        <div class="bg-danger text-right" th:if="${lastNameError}">
                            <span>خطأ في ادخال الاسم الاخير للمستخدم</span>
                        </div>
                    </div>
                    <div class="form-group has-feedback">
                        <input type="text" 
                               class="form-control text-right" 
                               id="phone"
                               name="phone"
                               th:value="${user.phone}"
                               required
                               oninvalid="this.setCustomValidity('من فضلك ادخل رقم الهاتف للمستخدم')"
                               oninput="setCustomValidity('')"
                               placeholder="رقم الهاتف">
                        <span class="glyphicon glyphicon-phone form-control-feedback"></span>
                        <div class="bg-danger text-right" th:if="${phoneError}">
                            <span>خطأ في ادخال رقم الهاتف للمستخدم</span>
                        </div>
                    </div>
                    <hr>

                    <div class="form-group has-feedback">
                        <input type="text"
                               class="form-control text-right" 
                               id="username"
                               name="username"
                               th:value="${user.username}"
                               required
                               oninvalid="this.setCustomValidity('من فضلك ادخل اسم الدخول للمستخدم')"
                               oninput="setCustomValidity('')"
                               placeholder="اسم الدحول">
                        <span class="glyphicon glyphicon-user form-control-feedback"></span>
                        <div class="bg-danger text-right" th:if="${usernameExists}">هذا الاسم مستخدم من قبل
                            <a th:href="@{/forgetPassword}" class="pull-left">
                                <b>
                                    نسيت كلمة المرور
                                </b>
                            </a></div>
                        <div class="bg-danger text-right" th:if="${usernameError}">
                            <span>خطأ في ادخال اسم الدخول للمستخدم</span>
                        </div>

                    </div>
                    <div class="form-group has-feedback">
                        <input type="email" 
                               class="form-control text-right"
                               id="email"
                               name="email"
                               th:value="${user.email}"
                               required
                               oninvalid="this.setCustomValidity('من فضلك ادخل البريد الالكتروني للمستخدم')"
                               oninput="setCustomValidity('')"
                               placeholder="البريد الإلكتروني">
                        <span class="glyphicon glyphicon-envelope form-control-feedback"></span>
                        <div class="bg-danger text-right" th:if="${emailExists}">هذا البريد مستخدم من قبل
                            <a th:href="@{/forgetPassword}" class="pull-left">
                                <b>
                                    نسيت كلمة المرور
                                </b>
                            </a>
                        </div>
                        <div class="bg-danger text-right" th:if="${emailError}">
                            <span>خطأ في ادخال البريد الالكتروني للمستخدم</span>
                        </div>
                    </div>


                    <div class="form-group has-feedback">
                        <input type="password" 
                               class="form-control text-right" 
                               id="password"
                               name="password"
                               th:value="${user.password}"
                               required
                               oninvalid="this.setCustomValidity('من فضلك ادخل كلمة المرور للمستخدم')"
                               oninput="setCustomValidity('')"
                               placeholder="كلمة المرور">
                        <span class="glyphicon glyphicon-lock form-control-feedback"></span>
                        <div class="bg-danger text-right" th:if="${passwordError}">
                            <span>خطأ في ادخال كلمة المرور للمستخدم</span>
                        </div>
                    </div>
                    <div class="form-group has-feedback">
                        <input type="password" 
                               class="form-control text-right"
                               id="confirm_password"
                               name="confirm_password"
                               required
                               oninvalid="this.setCustomValidity('من فضلك اعد ادخال كلمة المرور للمستخدم')"
                               oninput="setCustomValidity('')"
                               placeholder=" كلمة المرور مرة اخري">
                        <span class="glyphicon glyphicon-log-in form-control-feedback"></span>
                        <span class="text-right" id='message'></span>

                    </div>
                    <div class="row">
                        <div class="col-xs-8">
                        </div>
                        <!-- /.col -->
                        <div class="col-xs-4">
                            <button id="submitBtn"
                                    type="submit"
                                    class="btn btn-primary btn-block btn-flat">
                                اكمال التسجيل
                            </button>
                        </div>
                        <!-- /.col -->
                    </div>
                </form>
                <hr>

                <a th:href="@{/login}" class="text-center">لدي حساب علي النظام</a>
            </div>
            <!-- /.form-box -->
        </div>
        <!-- /.login-box -->


        <div th:replace="common/header :: body-bottom-scripts" ></div>
        <script>
            $(function () {
                $('input').iCheck({
                    checkboxClass: 'icheckbox_square-blue',
                    radioClass: 'iradio_square-blue',
                    increaseArea: '20%' /* optional */
                });
            });
            $('#password, #confirm_password').on('keyup', function () {
                if ($('#password').val() !== '' &&
                        $('#password').val() == $('#confirm_password').val()) {
                    $('#message').html('كلمة المرور متطابقة').css('color', 'green');
                } else
                    $('#message').html('كلمة المرور غير متطابقة').css('color', 'red');
            });

        </script>
    </body>
</html>
